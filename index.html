<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Kessel Run</title>
        <script src="phaser.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

        var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update, render: render });


        function preload() {
            game.load.image('logo', 'assets/title.png');
            game.load.image('ship', 'assets/ship.png');
            game.load.image('asteroid', 'assets/asteroid.png')
            game.load.image('background', 'assets/background.png')
        }

        var ship;

        function create() {
            game.renderer.clearBeforeRender = false;
            game.renderer.roundPixels = true;

            game.physics.startSystem(Phaser.Physics.ARCADE)

            var bg = game.add.sprite(game.world.centerX, game.world.centerY, 'background');
            bg.anchor.setTo(0.5, 0.5);

            ship = game.add.sprite(game.world.centerX, game.world.centerY, 'ship');
            ship.anchor.setTo(0.5, 0.5);

            game.physics.enable(ship, Phaser.Physics.ARCADE);
            ship.body.drag.set(100);
            ship.body.maxVelocity.set(400);

            cursors = game.input.keyboard.createCursorKeys();
            game.input.keyboard.addKeyCapture([ Phaser.Keyboard.SPACEBAR ]);
        }

        function update() {
            if (cursors.up.isDown) {
                game.physics.arcade.accelerationFromRotation(ship.rotation, 200, ship.body.acceleration);
            } else {
                ship.body.acceleration.set(0);
            }

            if (cursors.left.isDown) {
                ship.body.angularVelocity = -300;
            } else if (cursors.right.isDown) {
                ship.body.angularVelocity = 300;
            } else {
                ship.body.angularVelocity = 0;
            }

            screenWrap(ship);
        }

        function render() {

        }

        function screenWrap(sprite) {
            if (sprite.x < 0) {
                sprite.x = game.width;
            } else if (sprite.x > game.width) {
                sprite.x = 0;
            }

            if (sprite.y < 0) {
                sprite.y = game.height;
            } else if (sprite.y > game.height) {
                sprite.y = 0;
            }
        }

    };

    </script>

    </body>
</html>